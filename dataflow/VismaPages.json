{
	"name": "VismaPages",
	"properties": {
		"type": "MappingDataFlow",
		"typeProperties": {
			"sources": [
				{
					"dataset": {
						"referenceName": "VismaPages",
						"type": "DatasetReference"
					},
					"name": "PimcorePages"
				}
			],
			"sinks": [
				{
					"dataset": {
						"referenceName": "PagesPimcore",
						"type": "DatasetReference"
					},
					"name": "sinkPimcorePages"
				}
			],
			"transformations": [
				{
					"name": "AddColumns"
				}
			],
			"script": "parameters{\n\tItemNumber as string\n}\nsource(output(\n\t\tbody as (attachments as string[], attributes as string[], baseUnit as string, currentCost as double, defaultPrice as double, defaultWarehouse as (description as string, id as boolean), description as string, inventoryId as boolean, inventoryNumber as boolean, inventoryUnits as string[], itemClass as (attributes as string[], description as string, id as boolean, type as string), lastCost as double, lastModifiedDateTime as string, metadata as (totalCount as integer), packaging as (baseItemVolume as double, baseItemWeight as double), pendingCost as double, postingClass as (description as string, id as boolean), purchaseUnit as string, recommendedPrice as double, salesCategories as string[], salesUnit as string, status as string, stockItem as boolean, supplierDetails as string[], type as string, vatCode as (description as string, id as boolean)),\n\t\theaders as [string,string]\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\thttpMethod: 'GET',\n\ttimeout: 30,\n\trequestInterval: 0,\n\theaders: ['ipp-application-type' -> 'Visma.net Financials', 'ipp-company-id' -> '3464226', 'Authorization' -> 'Bearer c5b7d8ba-4cf8-4312-a520-6709738cae9c'],\n\tpaginationRules: ['supportRFC5988' -> 'true'],\n\tresponseFormat: ['type' -> 'json', 'documentForm' -> 'singleDocument']) ~> PimcorePages\nPimcorePages derive(TableName = 'VismaExtraTest',\n\t\tTotalPages = round(divide(body.metadata.totalCount, toInteger($ItemNumber)), 0,1)) ~> AddColumns\nAddColumns sink(allowSchemaDrift: true,\n\tvalidateSchema: false,\n\tinput(\n\t\tTableName as string,\n\t\tTotalCount as integer,\n\t\tTotalPages as integer\n\t),\n\tdeletable:false,\n\tinsertable:true,\n\tupdateable:false,\n\tupsertable:false,\n\tformat: 'table',\n\tpreSQLs:[' DELETE  \\n FROM [dbo].[Pages] \\n WHERE TableName LIKE \\'VismaExtraTest\\';'],\n\tpostSQLs:[' DELETE  \\n FROM [dbo].[Pages] \\n WHERE TableName IS NULL;'],\n\tskipDuplicateMapInputs: true,\n\tskipDuplicateMapOutputs: true,\n\terrorHandlingOption: 'stopOnFirstError',\n\tmapColumn(\n\t\tTableName,\n\t\tTotalPages\n\t)) ~> sinkPimcorePages"
		}
	}
}